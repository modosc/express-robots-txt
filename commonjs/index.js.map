{"version":3,"sources":["../esm/index.mjs"],"names":["Array","isArray","arg","Object","prototype","toString","call","asArray","value","undefined","robots","router","fs","readFileSync","render","get","req","res","header","send","SitemapArray","HostArray","map","robot","userAgentArray","UserAgent","userAgent","push","CrawlDelay","Sitemap","concat","Host","Disallow","disallow","line","join","length","sitemap","host"],"mappings":"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","sourcesContent":["import fs from 'fs'\nimport { Router } from 'express'\n\nif (!Array.isArray) {\n  Array.isArray = function isArray(arg) {\n    return Object.prototype.toString.call(arg) === '[object Array]'\n  }\n}\n\nconst asArray = function asArray(value) {\n  if (value === undefined) return []\n  if (Array.isArray(value)) return value\n  return [value]\n}\n\nfunction robots(robots) {\n  const router = Router()\n\n  if (robots) {\n    robots = typeof robots === 'string'\n      ? fs.readFileSync(robots, 'utf8')\n      : render(robots)\n  } else robots = ''\n\n  router.get('/robots.txt', (req, res) => {\n    res.header('Content-Type', 'text/plain')\n    res.send(robots)\n  })\n\n  return router\n}\n\nfunction render(robots) {\n  let SitemapArray = []\n  let HostArray = []\n  var robots = asArray(robots).map((robot) => {\n    let userAgentArray = []\n    if (Array.isArray(robot.UserAgent)) {\n      userAgentArray = robot.UserAgent.map((userAgent) => `User-agent: ${userAgent}`)\n    } else {\n      userAgentArray.push(`User-agent: ${robot.UserAgent}`)\n    }\n    if (robot.CrawlDelay) {\n      userAgentArray.push(`Crawl-delay: ${robot.CrawlDelay}`)\n    }\n\n    if (robot.Sitemap) {\n      SitemapArray = SitemapArray.concat(robot.Sitemap)\n    }\n    if (robot.Host) {\n      HostArray = HostArray.concat(robot.Host)\n    }\n\n    return userAgentArray.concat(asArray(robot.Disallow).map((disallow) => {\n      if (Array.isArray(disallow)) {\n        return disallow.map((line) => `Disallow: ${line}`).join('\\n')\n      }\n      return `Disallow: ${disallow}`\n    })).join('\\n')\n  }).join('\\n')\n\n  if (SitemapArray.length > 0) {\n    robots += `\\n${SitemapArray.map((sitemap) => `Sitemap: ${sitemap}`).join('\\n')}`\n  }\n  if (HostArray.length > 0) {\n    robots += `\\n${HostArray.map((host) => `Host: ${host}`).join('\\n')}`\n  }\n\n  return robots\n}\n\nexport default robots\n"],"file":"index.js"}